(()=>{"use strict";var e,t={8059:(e,t,n)=>{n(9789);var o=n(1090),l=n(188),r=n(309),i=n(8661),a=n(3065),s=n(7358),d=n(6333),c=n(1762),u=n(8734),p=n(2856),m=n(217),y=n(686),g=n(8266),f=n(9090),b=n(1345),v=n(8958),w=n(3492),h=n(7539),E=n(1280),Z=n(6121),x=n(1882),k=n(2657),_=n(8775),P=n(2017),L=n(559),I=n(7494);document.getElementById("selection_object"),document.getElementById("selection_object_id");const S=document.getElementById("geo-popup");S.style.display="block"==S.style.display?"none":"block";const B=document.getElementById("geo-popup-content"),T=document.getElementById("geo-popup-coords_data"),O=document.getElementById("geo-popup-closer"),H=(document.getElementById("geo-name-popup"),document.getElementById("geo-popup-name-popup")),M=document.getElementById("geo-obj-list"),C=document.getElementById("geo-select-list"),z=document.getElementById("geo-layer-panel"),G=(document.getElementById("geo-layer-name-panel"),document.getElementById("geo-layer")),j=document.getElementById("geo-layer-closer"),F=document.getElementById("inputForm");let N={};var W=document.createElement("button");W.className="button",W.innerHTML=close_button,O.appendChild(W);const A=new x.Z({element:S,autoPan:!0,autoPanAnimation:{duration:250,stopEvent:!1}}),V=(new b.Z({color:[255,255,255,0]}),new v.Z({color:[255,0,0,1],width:.5}),new w.Z({radius:5,fill:new b.Z({color:[0,0,0,1]}),stroke:new v.Z({color:[0,134,255,.9],width:1})}),e=>{const t=e.getProperties();var n=["les","uch_les","uroch","kvartal","vydel","term_p_num"],o="";for(let e in n)"string"==typeof t[n[e]]?t[n[e]].length>0&&(o+=`${t[n[e]]}\n`):"number"==typeof t[n[e]]&&(o+=`${t[n[e]]}\n`);return[new h.ZP({stroke:new v.Z({color:"rgba(255, 0, 0, 1)",width:.5}),fill:new b.Z({color:"rgba(255, 255, 255, 0)"})}),new h.ZP({image:new w.Z({radius:5,fill:new b.Z({color:"black"}),stroke:new v.Z({color:"rgba(0,134,255,0.9)",width:1})})}),new h.ZP({text:new E.Z({text:o,font:"12px Calibri,sans-serif",overflow:!0,fill:new b.Z({color:"#000"}),stroke:new v.Z({color:"#fff",width:2})})})]}),J=new h.ZP({stroke:new v.Z({color:"rgba(255,255,0,1)",width:1.5}),image:new w.Z({radius:7,fill:new b.Z({color:"rgb(255,255,0)"}),stroke:new v.Z({color:"rgba(255,255,0,1)",width:2})})});var R=[];for(let e in layer_id)R.push(new a.Z({declutter:!0,minZoom:minzoom[e],maxZoom:maxzoom[e],renderBuffer:200,renderOrder:null,renderMode:"hybrid",preload:0,useInterimTilesOnError:!1,updateWhileAnimating:!0,source:new s.Z({format:new r.Z({featureClass:o.Z}),url:"/geo/layer/"+layer_id[e]+"/tile/{z}/{x}/{y}"}),style:V}));const $=new p.Z({source:new g.Z}),q=new k.Z({collapsible:!1});var D='<table class="popup-text-all">';for(let e in layer_id)D+='<tr><td><td class="popup-text">'+layer_name[e]+"</td></tr>";D+="</table>";var K=new i.Z({interactions:(0,m.ce)({mouseWheelZoom:!1}).extend([new y.Z({constrainResolution:!0})]),controls:(0,P.ce)({attribution:!1}).extend([new function(){const e=document.createElement("button");e.innerHTML=layer_fill;const t=document.createElement("div");t.className="ol-layer-data ol-unselectable ol-control",t.appendChild(e),t.appendChild(z);const n=new _.Z({element:t}),o=document.createElement("button");return o.className="button",o.innerHTML=close_button,j.appendChild(o),G.innerHTML=D,e.addEventListener("click",(e=>{S.style.display="none"==S.style.display?"block":"none",console.log(z.scrollHeight),z.style.display="block"==z.style.display?"none":"block",z.style.maxHeight=z.scrollHeight+"px",N={},ne.changed()})),j.addEventListener("click",(e=>{z.style.display="none"})),n},new function(){const e=document.createElement("button");e.innerHTML=zoom_coords;const t=document.createElement("div");t.className="ol-zoom-coords ol-unselectable ol-control",t.title="Поиск по координатам",t.appendChild(e),t.appendChild(F);const n=new _.Z({element:t});return e.addEventListener("click",(e=>{F.style.display="block"==F.style.display?"none":"block"})),n},q]),renderer:"webgl",layers:[$,new u.Z({layers:R})],overlays:[A],moveTolerance:10,target:"map",loadTilesWhileAnimating:!0,loadTilesWhileInteracting:!0,view:new f.ZP({center:(0,Z.mi)([70.538086,62.201629]),enableRotation:!1,maxZoom:18,zoom:6,multiWorld:!0})});function Q(){const e=K.getSize()[0]<600;q.setCollapsible(e),q.setCollapsed(e)}window.addEventListener("resize",Q),Q();var U=K.getView().calculateExtent(K.getSize());const X=document.createElement("span");X.innerHTML=house_fill;const Y=new L.Z({extent:U,label:X}),ee=new I.Z({units:"metric",steps:2,dpi:96});document.getElementById("btn_addmarker").addEventListener("click",(function(){var e,t,n,r,i=document.getElementById("latitude").value,a=document.getElementById("longitude").value;console.log(a,i),K.removeLayer(te),e=a,t=i,n=new o.Z({geometry:new l.Z((0,Z.vs)([e,t],"EPSG:4326","EPSG:3857"))}),r=new c.Z({features:[n]}),te.setSource(r),te.setStyle(J),K.addLayer(te),K.getView().setCenter((0,Z.vs)([e,t],"EPSG:4326","EPSG:3857")),K.getView().setZoom(8)}));var te=new d.Z;K.addControl(Y),K.addControl(ee);const ne=new a.Z({map:K,declutter:!0,renderOrder:null,renderBuffer:200,renderMode:"vector",preload:0,useInterimTilesOnError:!1,updateWhileAnimating:!0});K.on("moveend",(function(e){var t=K.getView().calculateExtent(K.getSize());document.getElementById("geo-map-center").innerHTML=function(e){var t=e[0]+(e[2]-e[0])/2,n=e[1]+(e[3]-e[1])/2;const o=(0,Z.vs)([t,n],"EPSG:3857","EPSG:4326");return o[0].toFixed(6)+", "+o[1].toFixed(6)}(t)})),K.on("singleclick",(function(e){K.removeLayer(te),function(e){var t=K.getFeaturesAtPixel(e.pixel,(function(e){}),{hitTolerance:10}),n=t[0];function o(){if(t.length>0){C.options.length=0;for(let e of t)C.options.add(new Option(e.getProperties().layer,JSON.stringify(e)))}}!function(){S.style.display="block";const l=(0,Z.vs)(e.coordinate,"EPSG:3857","EPSG:4326"),r='<td class="popup-text">'+l[0].toFixed(6)+", "+l[1].toFixed(6)+"</td></tr>";if(!t.length)return H.innerHTML="Координаты",M.style.display="none",B.style.display="none",T.innerHTML=r,z.style.display="none",F.style.display="none",N={},void ne.changed();if(t.length>0){M.style.display="block",F.style.display="none",o(),B.style.display="block";const e=n.getProperties();var i='<table class="popup-text-all">';const{layer:t,...l}=e,a=Object.assign({},{...l});for(let t in a)"string"==typeof e[t]?e[t].length>0&&(i+="<tr><td>"+t+'</td><td class="popup-text">'+e[t]+"</td></tr>"):"number"==typeof e[t]&&(i+="<tr><td>"+t+'</td><td class="popup-text">'+e[t]+"</td></tr>");i+="</table>",H.innerHTML=e.layer,B.innerHTML=i,T.innerHTML=r}}(),o(),function(){if(t.length>0)for(let t in layer_id)if(n.getProperties().layer==layer_name[t]){var e=t;const o=n.get("id");N={},N[o]=n,ne.setSource(R[e].getSource()),ne.setStyle((function(e){if(e.get("id")in N)return J})),ne.changed()}}(),document.getElementById("geo-select-list").addEventListener("change",(function(){const t=JSON.parse(this.value);for(let r in layer_id)if(t.values_.layer==layer_name[r]){var o=r;const i=t.values_.id;console.log(i,this.text),N={},N[i]=n,ne.setSource(R[o].getSource()),ne.setStyle((function(e){if(e.get("id")in N)return J})),ne.changed(),S.style.display="block";const a=(0,Z.vs)(e.coordinate,"EPSG:3857","EPSG:4326"),s='<td class="popup-text">'+a[0].toFixed(6)+", "+a[1].toFixed(6)+"</td></tr>";T.innerHTML=s,M.style.display="block",B.style.display="block";const d=t.values_;var l='<table class="popup-text-all">';const{layer:c,...u}=d,p=Object.assign({},{...u});for(let e in p)"string"==typeof d[e]?d[e].length>0&&(l+="<tr><td>"+e+'</td><td class="popup-text">'+d[e]+"</td></tr>"):"number"==typeof d[e]&&(l+="<tr><td>"+e+'</td><td class="popup-text">'+d[e]+"</td></tr>");l+="</table>",H.innerHTML=d.layer,B.innerHTML=l,T.innerHTML=s}}))}(e);A.setPosition([""[0],(""[3]-""[1])/2]),O.onclick=function(){return A.setPosition(void 0),N={},ne.changed(),O.blur(),!1}}))}},n={};function o(e){var l=n[e];if(void 0!==l)return l.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.m=t,e=[],o.O=(t,n,l,r)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,l,r]=e[c],a=!0,s=0;s<n.length;s++)(!1&r||i>=r)&&Object.keys(o.O).every((e=>o.O[e](n[s])))?n.splice(s--,1):(a=!1,r<i&&(i=r));if(a){e.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,l,r]},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={882:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var l,r,[i,a,s]=n,d=0;if(i.some((t=>0!==e[t]))){for(l in a)o.o(a,l)&&(o.m[l]=a[l]);if(s)var c=s(o)}for(t&&t(n);d<i.length;d++)r=i[d],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(c)},n=self.webpackChunkwebpack_multiple_html=self.webpackChunkwebpack_multiple_html||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var l=o.O(void 0,[760,39,461],(()=>o(8059)));l=o.O(l)})();