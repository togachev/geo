"use strict";(self.webpackChunkwebpack_multiple_html=self.webpackChunkwebpack_multiple_html||[]).push([[39],{9789:()=>{},825:(t,e,r)=>{r.d(e,{Z:()=>l});var n,i=r(4806),o=r(7195),a=r(8326),s=r(9807),u=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});const l=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.crossOrigin_=i,s.src_=n,s.key=n,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.tileLoadFunction_=o,s}return u(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=o.Z.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){var t;this.state=o.Z.ERROR,this.unlistenImage_(),this.image_=((t=(0,a.E4)(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=o.Z.LOADED:this.state=o.Z.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==o.Z.ERROR&&(this.state=o.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==o.Z.IDLE&&(this.state=o.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,s.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(i.Z)},1882:(t,e,r)=>{r.d(e,{Z:()=>R});var n=r(2971),i=r(2126);const o="bottom-left",a="bottom-center",s="bottom-right",u="center-left",l="center-center",c="center-right",h="top-left",f="top-center",p="top-right";var d,g=r(245),_=r(8641),v=r(5818),m=r(8326),y=(d=function(t,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},d(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),T="element",E="map",x="offset",b="position",P="positioning";const R=function(t){function e(e){var r=t.call(this)||this;r.on,r.once,r.un,r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container "+g.$A,r.element.style.position="absolute",r.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!=typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),r.autoPan=n||!1,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addChangeListener(T,r.handleElementChanged),r.addChangeListener(E,r.handleMapChanged),r.addChangeListener(x,r.handleOffsetChanged),r.addChangeListener(b,r.handlePositionChanged),r.addChangeListener(P,r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(void 0!==e.positioning?e.positioning:h),void 0!==e.position&&r.setPosition(e.position),r}return y(e,t),e.prototype.getElement=function(){return this.get(T)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(E)},e.prototype.getOffset=function(){return this.get(x)},e.prototype.getPosition=function(){return this.get(b)},e.prototype.getPositioning=function(){return this.get(P)},e.prototype.handleElementChanged=function(){(0,m.ep)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&((0,m.ZF)(this.element),(0,v.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,v.oL)(t,i.Z.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(T,t)},e.prototype.setMap=function(t){this.set(E,t)},e.prototype.setOffset=function(t){this.set(x,t)},e.prototype.setPosition=function(t){this.set(b,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(b)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),i=this.getRect(n,[(0,m.iO)(n),(0,m.Pb)(n)]),o=t||{},a=void 0===o.margin?20:o.margin;if(!(0,_.r4)(r,i)){var s=i[0]-r[0],u=r[2]-i[2],l=i[1]-r[1],c=r[3]-i[3],h=[0,0];if(s<0?h[0]=s-a:u<0&&(h[0]=Math.abs(u)+a),l<0?h[1]=l-a:c<0&&(h[1]=Math.abs(c)+a),0!==h[0]||0!==h[1]){var f=e.getView().getCenterInternal(),p=e.getPixelFromCoordinateInternal(f);if(!p)return;var d=[p[0]+h[0],p[1]+h[1]],g=o.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(d),duration:g.duration,easing:g.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,i=r.top+window.pageYOffset;return[n,i,n+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(P,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,n=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var h=Math.round(t[0]+n[0])+"px",d=Math.round(t[1]+n[1])+"px",g="0%",_="0%";i==s||i==c||i==p?g="-100%":i!=a&&i!=l&&i!=f||(g="-50%"),i==o||i==a||i==s?_="-100%":i!=u&&i!=l&&i!=c||(_="-50%");var v="translate("+g+", "+_+") translate("+h+", "+d+")";this.rendered.transform_!=v&&(this.rendered.transform_=v,r.transform=v,r.msTransform=v)},e.prototype.getOptions=function(){return this.options},e}(n.Z)},9706:(t,e,r)=>{r.d(e,{XC:()=>s,mL:()=>h,_2:()=>f,BB:()=>d,e1:()=>g});var n=r(9515),i=r(3983),o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,a=/^([a-z]*)$|^hsla?\(.*\)$/i;function s(t){return"string"==typeof t?t:d(t)}function u(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}return""}var l,c,h=(l={},c=0,function(t){var e;if(l.hasOwnProperty(t))e=l[t];else{if(c>=1024){var r=0;for(var i in l)0==(3&r++)&&(delete l[i],--c)}e=function(t){var e,r,i,s,l;if(a.exec(t)&&(t=u(t)),o.exec(t)){var c=t.length-1,h=void 0;h=c<=4?1:2;var f=4===c||8===c;e=parseInt(t.substr(1+0*h,h),16),r=parseInt(t.substr(1+1*h,h),16),i=parseInt(t.substr(1+2*h,h),16),s=f?parseInt(t.substr(1+3*h,h),16):255,1==h&&(e=(e<<4)+e,r=(r<<4)+r,i=(i<<4)+i,f&&(s=(s<<4)+s)),l=[e,r,i,s/255]}else 0==t.indexOf("rgba(")?p(l=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((l=t.slice(4,-1).split(",").map(Number)).push(1),p(l)):(0,n.h)(!1,14);return l}(t),l[t]=e,++c}return e});function f(t){return Array.isArray(t)?t:h(t)}function p(t){return t[0]=(0,i.uZ)(t[0]+.5|0,0,255),t[1]=(0,i.uZ)(t[1]+.5|0,0,255),t[2]=(0,i.uZ)(t[2]+.5|0,0,255),t[3]=(0,i.uZ)(t[3],0,1),t}function d(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function g(t){return a.test(t)&&(t=u(t)),o.test(t)||0===t.indexOf("rgba(")||0===t.indexOf("rgb(")}},7494:(t,e,r)=>{r.d(e,{Z:()=>m});var n,i=r(8775),o=r(8375),a=r(245),s=r(6121),u=r(9515),l=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),c="units",h="degrees",f="imperial",p="nautical",d="metric",g="us",_=[1,2,5],v=25.4/.28;const m=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(r=t.call(this,{element:document.createElement("div"),render:n.render,target:n.target})||this).on,r.once,r.un,r.innerElement_=document.createElement("div"),r.innerElement_.className=i+"-inner",r.element.className=i+" "+a.XV,r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==n.minWidth?n.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addChangeListener(c,r.handleUnitsChanged_),r.setUnits(n.units||d),r.scaleBar_=n.bar||!1,r.scaleBarSteps_=n.steps||4,r.scaleBarText_=n.text||!1,r.dpi_=n.dpi||void 0,r}return l(e,t),e.prototype.getUnits=function(){return this.get(c)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(c,t)},e.prototype.setDpi=function(t){this.dpi_=t},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),i=n==h?o.ZP.DEGREES:o.ZP.METERS,a=(0,s._Q)(r,t.resolution,e,i),l=this.minWidth_*(this.dpi_||v)/v,c=l*a,m="";if(n==h){var y=s.Wm[o.ZP.DEGREES];(c*=y)<y/60?(m="″",a*=3600):c<y?(m="′",a*=60):m="°"}else n==f?c<.9144?(m="in",a/=.0254):c<1609.344?(m="ft",a/=.3048):(m="mi",a/=1609.344):n==p?(a/=1852,m="nm"):n==d?c<.001?(m="μm",a*=1e6):c<1?(m="mm",a*=1e3):c<1e3?m="m":(m="km",a/=1e3):n==g?c<.9144?(m="in",a*=39.37):c<1609.344?(m="ft",a/=.30480061):(m="mi",a/=1609.3472):(0,u.h)(!1,33);for(var T,E,x,b,P=3*Math.floor(Math.log(l*a)/Math.log(10));;){x=Math.floor(P/3);var R=Math.pow(10,x);if(T=_[(P%3+3)%3]*R,E=Math.round(T/a),isNaN(E))return this.element.style.display="none",void(this.renderedVisible_=!1);if(E>=l)break;++P}b=this.scaleBar_?this.createScaleBar(E,T,m):T.toFixed(x<0?-x:0)+" "+m,this.renderedHTML_!=b&&(this.innerElement_.innerHTML=b,this.renderedHTML_=b),this.renderedWidth_!=E&&(this.innerElement_.style.width=E+"px",this.renderedWidth_=E),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,r){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&i.push(this.createMarker("absolute",s)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,r):"")+"</div>"),s===this.scaleBarSteps_-1&&i.push(this.createStepText(s+1,t,!0,e,r)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+n+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,r,n,i){var o=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(r?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=(0,s._Q)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,o.ZP.METERS),e=this.dpi_||v;return parseFloat(t.toString())*(1e3/25.4)*e},e.prototype.render=function(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()},e}(i.Z)},559:(t,e,r)=>{r.d(e,{Z:()=>l});var n,i=r(8775),o=r(5487),a=r(245),s=r(3083),u=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});const l=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).extent=n.extent?n.extent:null;var i=void 0!==n.className?n.className:"ol-zoom-extent",s=void 0!==n.label?n.label:"E",u=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",l=document.createElement("button");l.setAttribute("type","button"),l.title=u,l.appendChild("string"==typeof s?document.createTextNode(s):s),l.addEventListener(o.Z.CLICK,r.handleClick_.bind(r),!1);var c=i+" "+a.XV+" "+a.hg,h=r.element;return h.className=c,h.appendChild(l),r}return u(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal((0,s.oJ)(e))},e}(i.Z)},245:(t,e,r)=>{r.d(e,{oj:()=>n,$A:()=>i,XV:()=>o,hg:()=>a,hN:()=>s,p:()=>c,Xy:()=>h});var n="ol-hidden",i="ol-selectable",o="ol-unselectable",a="ol-control",s="ol-collapsed",u=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),l=["style","variant","weight","size","lineHeight","family"],c=function(t){var e=t.match(u);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=l.length;n<i;++n){var o=e[n+1];void 0!==o&&(r[l[n]]=o)}return r.families=r.family.split(/,\s?/),r};function h(t){return 1===t?"":String(Math.round(100*t)/100)}},8326:(t,e,r)=>{r.d(e,{E4:()=>i,iO:()=>o,Pb:()=>a,$H:()=>s,ZF:()=>u,ep:()=>l,hF:()=>c});var n=r(177);function i(t,e,r,i){var o;return o=r&&r.length?r.shift():n.Id?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(o.width=t),e&&(o.height=e),o.getContext("2d",i)}function o(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+=parseInt(r.marginLeft,10)+parseInt(r.marginRight,10)}function a(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+=parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)}function s(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function u(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function l(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function c(t,e){for(var r=t.childNodes,n=0;;++n){var i=r[n],o=e[n];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--n):t.appendChild(o))}}},2856:(t,e,r)=>{r.d(e,{Z:()=>ue});var n,i=r(1295),o=r(8280),a=r(9374),s=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});const u=function(t){function e(e){var r=this,n=e||{},i=(0,a.f0)({},n);return delete i.preload,delete i.useInterimTilesOnError,(r=t.call(this,i)||this).on,r.once,r.un,r.setPreload(void 0!==n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return s(e,t),e.prototype.getPreload=function(){return this.get(o.Z.PRELOAD)},e.prototype.setPreload=function(t){this.set(o.Z.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(o.Z.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(o.Z.USE_INTERIM_TILES_ON_ERROR,t)},e}(i.Z);var l=r(1912),c=r(6131),h=r(4562),f=r(2519),p=r(7195),d=r(208),g=r(5487),_=r(825),v=r(1535),m=34962,y=34963,T=35044,E=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function x(t,e){for(var r=(0,a.f0)({preserveDrawingBuffer:!0},e),n=E.length,i=0;i<n;++i)try{var o=t.getContext(E[i],r);if(o)return o}catch(t){}return null}var b=r(9515),P=T,R=function(){function t(t,e){this.array=null,this.type=t,(0,b.h)(t===m||t===y,62),this.usage=void 0!==e?e:P}return t.prototype.ofSize=function(t){this.array=new(S(this.type))(t)},t.prototype.fromArray=function(t){var e=S(this.type);this.array=e.from?e.from(t):new e(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(S(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}();function S(t){switch(t){case m:return Float32Array;case y:return Uint32Array;default:return Float32Array}}const C=R;var w=r(4307),L=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function A(t,e,r){var n=r?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)}function O(t,e,r,n,i,o){var a=t.getGL();A(a,e,o);var s,u,l=r.byteLength/n[1],c=1;switch(l%8==0?c=8:l%4==0?c=4:l%2==0&&(c=2),i){case 1:s=a.LUMINANCE;break;case 2:s=a.LUMINANCE_ALPHA;break;case 3:s=a.RGB;break;case 4:s=a.RGBA;break;default:throw new Error("Unsupported number of bands: "+i)}r instanceof Float32Array?(u=a.FLOAT,t.getExtension("OES_texture_float"),t.getExtension("OES_texture_float_linear")):u=a.UNSIGNED_BYTE;var h=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,c),a.texImage2D(a.TEXTURE_2D,0,s,n[0],n[1],0,s,u,r),a.pixelStorei(a.UNPACK_ALIGNMENT,h)}const F=function(t){function e(e,r,n){var i=t.call(this)||this;i.tile,i.textures=[],i.handleTileChange_=i.handleTileChange_.bind(i),i.size=(0,w.Pq)(r.getTileSize(e.tileCoord[0])),i.bandCount=NaN,i.helper_=n;var o=new C(m,T);return o.fromArray([0,1,1,1,1,0,0,0]),n.flushBufferData(o),i.coords=o,i.setTile(e),i}return L(e,t),e.prototype.setTile=function(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(g.Z.CHANGE,this.handleTileChange_),this.tile=t,this.textures.length=0,this.loaded=t.getState()===p.Z.LOADED,this.loaded)this.uploadTile_();else{if(t instanceof _.Z){var e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(g.Z.CHANGE,this.handleTileChange_)}},e.prototype.uploadTile_=function(){var t=this.helper_,e=t.getGL(),r=this.tile;if(r instanceof _.Z||r instanceof v.Z){var n=e.createTexture();return this.textures.push(n),this.bandCount=4,void function(t,e,r,n){A(t,e,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}(e,n,r.getImage(),r.interpolate)}var i=r.getData(),o=i instanceof Float32Array,a=this.size[0]*this.size[1],s=o?Float32Array:Uint8Array,u=s.BYTES_PER_ELEMENT,l=i.byteLength/this.size[1];this.bandCount=Math.floor(l/u/this.size[0]);var c=Math.ceil(this.bandCount/4);if(1===c){n=e.createTexture();return this.textures.push(n),void O(t,n,i,this.size,this.bandCount,r.interpolate)}for(var h=new Array(c),f=0;f<c;++f){n=e.createTexture();this.textures.push(n);var p=f<c-1?4:this.bandCount%4;h[f]=new s(a*p)}for(var d=0,g=0,m=this.size[0]*this.bandCount,y=0;y<this.size[1];++y){for(var T=0;T<m;++T){var E=i[g+T],x=Math.floor(d/this.bandCount),b=T%this.bandCount;(P=h[f=Math.floor(b/4)])[x*(p=P.length/a)+b%4]=E,++d}g+=l/u}for(f=0;f<c;++f){var P;n=this.textures[f],p=(P=h[f]).length/a;O(t,n,P,this.size,p,r.interpolate)}},e.prototype.handleTileChange_=function(){this.tile.getState()===p.Z.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(g.Z.CHANGE))},e.prototype.disposeInternal=function(){var t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(g.Z.CHANGE,this.handleTileChange_)},e}(d.Z);var M=r(115),U=r(7380),G=r(8771);const I="webglcontextlost",D="webglcontextrestored";var j=r(5431),N=r(4187),B=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(r);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.uniforms_.push({value:t.uniforms[r],location:e.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,n,r[0],r[1],0,i,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e,r,n){var i=this.getGL(),o=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,e?e.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!e){var a=(0,N.sq)(i.canvas);if(!t.renderTargets[a]){var s=i.getContextAttributes();s&&s.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),t.renderTargets[a]=!0}}i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,o[0],o[1]),i.uniform1i(this.renderTargetTextureLocation_,0);var u=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,u),this.applyUniforms(t),r&&r(i,t),i.drawArrays(i.TRIANGLES,0,6),n&&n(i,t)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=1;this.uniforms_.forEach((function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,e.width,e.height,0,r.UNSIGNED_BYTE,new Uint8Array(e.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(i.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void r.uniform2f(i.location,e[0],e[1]);case 3:return void r.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void r.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(i.location,e)}))},t}();const Z=B;var X=r(6101);function k(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var W=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),z="u_offsetScaleMatrix",V="u_offsetRotateMatrix",H="u_time",Y="u_zoom",K="u_resolution",q=5121,$=5123,J=5125,Q=5126,tt={};function et(t){return"shared/"+t}var rt=0;var nt=function(t){function e(e){var r,n=t.call(this)||this,i=e||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=i.canvasCacheKey?et(i.canvasCacheKey):(r="unique/"+rt,rt+=1,r),n.canvas_=function(t){var e=tt[t];if(!e){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",e={users:0,canvas:r},tt[t]=e}return e.users+=1,e.canvas}(n.canvasCacheKey_),n.gl_=x(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(I,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(D,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=(0,X.Ue)(),n.offsetScaleMatrix_=(0,X.Ue)(),n.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],i.uniforms&&n.setUniforms(i.uniforms);var o=n.getGL();return n.postProcessPasses_=i.postProcesses?i.postProcesses.map((function(t){return new Z({webGlContext:o,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new Z({webGlContext:o})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return W(e,t),e.prototype.setUniforms=function(t){for(var e in this.uniforms_=[],t)this.uniforms_.push({name:e,value:t[e]});this.uniformLocations_={}},e.prototype.canvasCacheKeyMatches=function(t){return this.canvasCacheKey_===et(t)},e.prototype.getExtension=function(t){if(t in this.extensionCache_)return this.extensionCache_[t];var e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e},e.prototype.bindBuffer=function(t){var e=this.getGL(),r=(0,N.sq)(t),n=this.bufferCache_[r];n||(n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[r]=n);e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=(0,N.sq)(t),n=this.bufferCache_[r];n&&!e.isContextLost()&&e.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(I,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(D,this.boundHandleWebGLContextRestored_),function(t){var e=tt[t];if(e&&(e.users-=1,!(e.users>0))){var r=x(e.canvas).getExtension("WEBGL_lose_context");r&&r.loseContext(),delete tt[t]}}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},e.prototype.prepareDraw=function(t,e){var r=this.getGL(),n=this.getCanvas(),i=t.size,o=t.pixelRatio;n.width=i[0]*o,n.height=i[1]*o,n.style.width=i[0]+"px",n.style.height=i[1]+"px",r.useProgram(this.currentProgram_);for(var a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(t);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,e?r.ZERO:r.ONE_MINUS_SRC_ALPHA),r.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var n=this.getGL(),i=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,i[0],i[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL();this.getExtension("OES_element_index_uint");var n=r.UNSIGNED_INT,i=e-t,o=4*t;r.drawElements(r.TRIANGLES,i,n,o)},e.prototype.finalizeDraw=function(t,e,r){for(var n=0,i=this.postProcessPasses_.length;n<i;n++)n===i-1?this.postProcessPasses_[n].apply(t,null,e,r):this.postProcessPasses_[n].apply(t,this.postProcessPasses_[n+1])},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,n=(0,X.mc)(this.offsetScaleMatrix_);(0,X.bA)(n,2/e[0],2/e[1]);var i=(0,X.mc)(this.offsetRotateMatrix_);0!==r&&(0,X.U1)(i,-r),this.setUniformMatrixValue(z,k(this.tmpMat4_,n)),this.setUniformMatrixValue(V,k(this.tmpMat4_,i)),this.setUniformFloatValue(H,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(Y,t.viewState.zoom),this.setUniformFloatValue(K,t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=0;this.uniforms_.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)i.texture||(i.prevValue=void 0,i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&i.prevValue!==e&&(i.prevValue=e,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)),r.uniform1i(this.getUniformLocation(i.name),n++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,k(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0)},e.prototype.compileShader=function(t,e){var r=this.getGL(),n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n},e.prototype.getProgram=function(t,e){var r=this.getGL(),n=this.compileShader(t,r.FRAGMENT_SHADER),i=this.compileShader(e,r.VERTEX_SHADER),o=r.createProgram();if(r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),!r.getShaderParameter(n,r.COMPILE_STATUS)){var a="Fragment shader compliation failed: "+r.getShaderInfoLog(n);throw new Error(a)}if(r.deleteShader(n),!r.getShaderParameter(i,r.COMPILE_STATUS)){a="Vertex shader compilation failed: "+r.getShaderInfoLog(i);throw new Error(a)}if(r.deleteShader(i),!r.getProgramParameter(o,r.LINK_STATUS)){a="GL program linking failed: "+r.getShaderInfoLog(i);throw new Error(a)}return o},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,n=t.viewState.rotation,i=t.viewState.resolution,o=t.viewState.center;return(0,X.mc)(e),(0,X.qC)(e,0,0,2/(i*r[0]),2/(i*r[1]),-n,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,r,n,i){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,r,!1,n,i))},e.prototype.enableAttributes=function(t){for(var e=function(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*it(n.type)}return e}(t),r=0,n=0;n<t.length;n++){var i=t[n];this.enableAttributeArray_(i.name,i.size,i.type||5126,e,r),r+=i.size*it(i.type)}},e.prototype.handleWebGLContextLost=function(){(0,a.ZH)(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var n=this.getGL(),i=r||n.createTexture(),o=n.RGBA,a=n.RGBA,s=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,0,o,a,s,e):n.texImage2D(n.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i},e}(j.Z);function it(t){switch(t){case q:return Uint8Array.BYTES_PER_ELEMENT;case $:return Uint16Array.BYTES_PER_ELEMENT;case J:return Uint32Array.BYTES_PER_ELEMENT;default:return Float32Array.BYTES_PER_ELEMENT}}const ot=nt;var at=r(8641),st=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),ut=function(t){function e(e,r){var n=t.call(this,e)||this,i=r||{};return n.inversePixelTransform_=(0,X.Ue)(),n.pixelContext_=null,n.postProcesses_=i.postProcesses,n.uniforms_=i.uniforms,n.helper,e.addChangeListener(l.Z.MAP,n.removeHelper_.bind(n)),n.dispatchPreComposeEvent=n.dispatchPreComposeEvent.bind(n),n.dispatchPostComposeEvent=n.dispatchPostComposeEvent.bind(n),n}return st(e,t),e.prototype.dispatchPreComposeEvent=function(t,e){var r=this.getLayer();if(r.hasListener(G.Z.PRECOMPOSE)){var n=new U.Z(G.Z.PRECOMPOSE,void 0,e,t);r.dispatchEvent(n)}},e.prototype.dispatchPostComposeEvent=function(t,e){var r=this.getLayer();if(r.hasListener(G.Z.POSTCOMPOSE)){var n=new U.Z(G.Z.POSTCOMPOSE,void 0,e,t);r.dispatchEvent(n)}},e.prototype.reset=function(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},e.prototype.removeHelper_=function(){this.helper&&(this.helper.dispose(),delete this.helper)},e.prototype.prepareFrame=function(t){if(this.getLayer().getSource()){for(var r=!0,n=-1,i=void 0,o=0,a=t.layerStatesArray.length;o<a;o++){var s=t.layerStatesArray[o].layer,u=s.getRenderer();if(u instanceof e){var l=s.getClassName();if((r||l!==i)&&(n+=1,r=!1),i=l,u===this)break}else r=!0}var c="map/"+t.mapId+"/group/"+n;this.helper&&this.helper.canvasCacheKeyMatches(c)||(this.helper&&this.helper.dispose(),this.helper=new ot({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:c}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(t)},e.prototype.afterHelperCreated=function(){},e.prototype.prepareFrameInternal=function(t){return!0},e.prototype.disposeInternal=function(){this.removeHelper_(),t.prototype.disposeInternal.call(this)},e.prototype.dispatchRenderEvent_=function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){(0,X.qC)(this.inversePixelTransform_,0,0,r.pixelRatio,-r.pixelRatio,0,0,-r.size[1]);var i=new U.Z(t,this.inversePixelTransform_,r,e);n.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(G.Z.PRERENDER,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(G.Z.POSTRENDER,t,e)},e.prototype.getDataAtPixel=function(t,e,r){var n=(0,X.nn)([e.pixelRatio,0,0,e.pixelRatio,0,0],t.slice()),i=this.helper.getGL();if(!i)return null;var o=this.getLayer().getExtent();if(o){var a=(0,X.nn)(e.pixelToCoordinateTransform,t.slice());if(!(0,at.b8)(o,a))return null}var s=i.getContextAttributes();if(!s||!s.preserveDrawingBuffer)return new Uint8Array;var u,l=Math.round(n[0]),c=Math.round(n[1]),h=this.pixelContext_;if(!h){var f=document.createElement("canvas");f.width=1,f.height=1,h=f.getContext("2d"),this.pixelContext_=h}h.clearRect(0,0,1,1);try{h.drawImage(i.canvas,l,c,1,1,0,0,1,1),u=h.getImageData(0,0,1,1).data}catch(t){return u}return 0===u[3]?null:u},e}(M.Z);const lt=ut;var ct=r(8634),ht=r(6121),ft=r(5537),pt=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),dt="u_tileTextures",gt="u_tileTransform",_t="u_transitionAlpha",vt="u_depth",mt="u_texturePixelWidth",yt="u_texturePixelHeight",Tt="u_resolution",Et="u_zoom",xt="a_textureCoord",bt=[{name:xt,size:2,type:Q}],Pt={};function Rt(t){return 2*(1-1/(t+1))-1}function St(t,e,r){r in t||(t[r]=[]),t[r].push(e)}function Ct(t,e){var r=t.layerStatesArray[t.layerIndex];r.extent&&(e=(0,at.Ed)(e,(0,ht.dY)(r.extent,t.viewState.projection)));var n=r.layer.getSource();if(!n.getWrapX()){var i=n.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=(0,at.Ed)(e,i))}return e}var wt=function(t){function e(e,r){var n=t.call(this,e,{uniforms:r.uniforms})||this;n.tileTransform_=(0,X.Ue)(),n.tempMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],n.tempTileRange_=new f.Z(0,0,0,0),n.tempTileCoord_=(0,ct.T9)(0,0,0),n.tempSize_=[0,0],n.program_,n.vertexShader_=r.vertexShader,n.fragmentShader_=r.fragmentShader,n.indices_=new C(y,T),n.indices_.fromArray([0,1,3,1,2,3]);var i=void 0!==r.cacheSize?r.cacheSize:512;return n.tileTextureCache_=new c.Z(i),n.paletteTextures_=r.paletteTextures||[],n}return pt(e,t),e.prototype.reset=function(e){t.prototype.reset.call(this,{uniforms:e.uniforms}),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.paletteTextures_=e.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},e.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return r==p.Z.LOADED||r==p.Z.EMPTY||r==p.Z.ERROR&&!n},e.prototype.prepareFrameInternal=function(t){var e=this.getLayer().getSource();return!!e&&(!(0,at.xb)(Ct(t,t.extent))&&e.getState()===h.Z.READY)},e.prototype.enqueueTiles=function(t,e,r,n){var i=t.viewState,o=this.getLayer().getSource(),a=o.getTileGridForProjection(i.projection),s=this.tileTextureCache_,u=a.getTileRangeForExtentAndZ(e,r,this.tempTileRange_),l=(0,N.sq)(o);l in t.wantedTiles||(t.wantedTiles[l]={});for(var c=t.wantedTiles[l],h=a.getResolution(r),f=u.minX;f<=u.maxX;++f)for(var d=u.minY;d<=u.maxY;++d){var g=(0,ct.T9)(r,f,d,this.tempTileCoord_),_=(0,ct.km)(g),v=void 0,m=void 0;if(s.containsKey(_)&&(m=(v=s.get(_)).tile),!v||v.tile.key!==o.getKey())if(m=o.getTile(r,f,d,t.pixelRatio,i.projection),v)if(this.isDrawableTile_(m))v.setTile(m);else{var y=m.getInterimTile();v.setTile(y)}else v=new F(m,a,this.helper),s.set(_,v);St(n,v,r);var T=m.getKey();c[T]=!0,m.getState()===p.Z.IDLE&&(t.tileQueue.isKeyQueued(T)||t.tileQueue.enqueue([m,l,a.getTileCoordCenter(g),h]))}},e.prototype.renderFrame=function(t){var e=this.helper.getGL();this.preRender(e,t);var r=t.viewState,n=this.getLayer().getSource(),i=n.getTileGridForProjection(r.projection),o=Ct(t,t.extent),a=i.getZForResolution(r.resolution,n.zDirection),s={};if(t.nextExtent){var u=i.getZForResolution(r.nextResolution,n.zDirection),l=Ct(t,t.nextExtent);this.enqueueTiles(t,l,u,s)}this.enqueueTiles(t,o,a,s);for(var c={},h=(0,N.sq)(this),f=t.time,p=!1,d=s[a],g=0,_=d.length;g<_;++g){var v=(G=($=d[g]).tile).tileCoord;if($.loaded){if(1===(I=G.getAlpha(h,f))){G.endTransition(h);continue}p=!0,c[D=(0,ct.km)(v)]=I}if(!this.findAltTiles_(i,v,a+1,s))for(var m=i.getMinZoom(),y=a-1;y>=m;--y){if(this.findAltTiles_(i,v,y,s))break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(t,!p);for(var T=Object.keys(s).map(Number).sort(ft.kK),E=r.center[0],x=r.center[1],b=0,P=T.length;b<P;++b){var R=T[b],S=i.getResolution(R),C=(0,w.Pq)(i.getTileSize(R),this.tempSize_),L=i.getOrigin(R),A=(E-L[0])/(C[0]*S),O=(L[1]-x)/(C[1]*S),F=r.resolution/S,M=Rt(R),U=s[R];for(g=0,_=U.length;g<_;++g){if(($=U[g]).loaded){v=(G=$.tile).tileCoord;var G,I,D=(0,ct.km)(v),j=v[1],B=v[2];(0,X.qC)(this.tileTransform_,0,0,2/(t.size[0]*F/C[0]),-2/(t.size[1]*F/C[1]),r.rotation,-(A-j),-(O-B)),this.helper.setUniformMatrixValue(gt,k(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer($.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(bt);for(var Z=0;Z<$.textures.length;){var W="TEXTURE"+Z,z=dt+"["+Z+"]";e.activeTexture(e[W]),e.bindTexture(e.TEXTURE_2D,$.textures[Z]),e.uniform1i(this.helper.getUniformLocation(z),Z),++Z}for(var V=0;V<this.paletteTextures_.length;++V){var H=this.paletteTextures_[V];e.activeTexture(e["TEXTURE"+Z]);var Y=H.getTexture(e);e.bindTexture(e.TEXTURE_2D,Y),e.uniform1i(this.helper.getUniformLocation(H.name),Z),++Z}(I=D in c?c[D]:1)<1&&(t.animate=!0),this.helper.setUniformFloatValue(_t,I),this.helper.setUniformFloatValue(vt,M),this.helper.setUniformFloatValue(mt,C[0]),this.helper.setUniformFloatValue(yt,C[1]),this.helper.setUniformFloatValue(Tt,r.resolution),this.helper.setUniformFloatValue(Et,r.zoom),this.helper.drawElements(0,this.indices_.getSize())}}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var K=this.helper.getCanvas(),q=this.tileTextureCache_;q.canExpireCache();){var $;($=q.pop()).dispose()}return t.postRenderFunctions.push((function(t,e){n.expireCache(e.viewState.projection,Pt)})),this.postRender(e,t),K},e.prototype.findAltTiles_=function(t,e,r,n){var i=t.getTileRangeForTileCoordAndZ(e,r,this.tempTileRange_);if(!i)return!1;for(var o=!0,a=this.tileTextureCache_,s=i.minX;s<=i.maxX;++s)for(var u=i.minY;u<=i.maxY;++u){var l=(0,ct.lg)(r,s,u),c=!1;if(a.containsKey(l)){var h=a.get(l);h.loaded&&(St(n,h,r),c=!0)}c||(o=!1)}return o},e.prototype.disposeInternal=function(){var e=this.helper,r=e.getGL();e.deleteBuffer(this.indices_),delete this.indices_,r.deleteProgram(this.program_),delete this.program_;var n=this.tileTextureCache_;n.forEach((function(t){t.dispose()})),n.clear(),delete this.tileTextureCache_,t.prototype.disposeInternal.call(this)},e}(lt);wt.prototype.getLayer;const Lt=wt;const At=function(){function t(t,e){this.name=t,this.data=e,this.texture_=null}return t.prototype.getTexture=function(t){if(!this.texture_){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_},t}();var Ot=r(9706),Ft=r(3983),Mt=1,Ut=2,Gt=4,It=8,Dt=16,jt=31,Nt=0,Bt={};function Zt(t){if("number"==typeof t)return Mt;if("boolean"==typeof t)return It;if("string"==typeof t)return(0,Ot.e1)(t)?Gt|Ut:Ut;if(!Array.isArray(t))throw new Error("Unhandled value type: "+JSON.stringify(t));var e=t;if(e.every((function(t){return"number"==typeof t})))return 3===e.length||4===e.length?Gt|Dt:Dt;if("string"!=typeof e[0])throw new Error("Expected an expression operator but received: "+JSON.stringify(e));var r=Bt[e[0]];if(void 0===r)throw new Error("Unrecognized expression operator: "+JSON.stringify(e));return r.getReturnType(e.slice(1))}function Xt(t){var e=t.toString();return-1===e.indexOf(".")?e+".0":e}function kt(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec"+t.length+"("+t.map(Xt).join(", ")+")"}function Wt(t,e){return void 0===t.stringLiteralsMap[e]&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function zt(t,e,r){if(Array.isArray(e)&&"string"==typeof e[0]){var n=Bt[e[0]];if(void 0===n)throw new Error("Unrecognized expression operator: "+JSON.stringify(e));return n.toGlsl(t,e.slice(1),r)}var i=Zt(e);if((i&Mt)>0)return Xt(e);if((i&It)>0)return e.toString();if((i&Ut)>0&&(void 0===r||r==Ut))return function(t,e){return Xt(Wt(t,e))}(t,e.toString());if((i&Gt)>0&&(void 0===r||r==Gt))return function(t){var e=(0,Ot._2)(t).slice();return e.length<4&&e.push(1),kt(e.map((function(t,e){return e<3?t/255:t})))}(e);if((i&Dt)>0)return kt(e);throw new Error("Unexpected expression "+e+" (expected type "+r+")")}function Vt(t){if(!(Zt(t)&Mt))throw new Error("A numeric value was expected, got "+JSON.stringify(t)+" instead")}function Ht(t){for(var e=0;e<t.length;e++)Vt(t[e])}function Yt(t){if(!(Zt(t)&Ut))throw new Error("A string value was expected, got "+JSON.stringify(t)+" instead")}function Kt(t){if(!(Zt(t)&It))throw new Error("A boolean value was expected, got "+JSON.stringify(t)+" instead")}function qt(t,e){if(t.length!==e)throw new Error("Exactly "+e+" arguments were expected, got "+t.length+" instead")}function $t(t,e){if(t.length<e)throw new Error("At least "+e+" arguments were expected, got "+t.length+" instead")}function Jt(t,e){if(t.length>e)throw new Error("At most "+e+" arguments were expected, got "+t.length+" instead")}function Qt(t){if(t.length%2!=0)throw new Error("An even amount of arguments was expected, got "+t+" instead")}function te(t,e){if(r=e,(0,Ft.k3)(r)%1!=0)throw new Error("Could not infer only one type from the following expression: "+JSON.stringify(t));var r}function ee(t){return"u_var_"+t}Bt.get={getReturnType:function(t){return jt},toGlsl:function(t,e){qt(e,1),Yt(e[0]);var r=e[0].toString();return-1===t.attributes.indexOf(r)&&t.attributes.push(r),(t.inFragmentShader?"v_":"a_")+r}},Bt.var={getReturnType:function(t){return jt},toGlsl:function(t,e){qt(e,1),Yt(e[0]);var r=e[0].toString();return-1===t.variables.indexOf(r)&&t.variables.push(r),ee(r)}};Bt.palette={getReturnType:function(t){return Gt},toGlsl:function(t,e){qt(e,2),Vt(e[0]);var r=zt(t,e[0]),n=e[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var i=n.length,o=new Uint8Array(4*i),a=0;a<i;a++){var s=n[a],u=void 0;if("string"==typeof s)u=(0,Ot.mL)(s);else{if(!Array.isArray(s))throw new Error("The second argument of palette must be an array of strings or colors");var l=s.length;if(4===l)u=s;else{if(3!==l)throw new Error("Expected palette color to have 3 or 4 values, got "+l);u=[s[0],s[1],s[2],1]}}var c=4*a;o[c]=u[0],o[c+1]=u[1],o[c+2]=u[2],o[c+3]=255*u[3]}t.paletteTextures||(t.paletteTextures=[]);var h="u_paletteTextures["+t.paletteTextures.length+"]",f=new At(h,o);return t.paletteTextures.push(f),"texture2D("+h+", vec2(("+r+" + 0.5) / "+i+".0, 0.5))"}};var re="getBandValue";function ne(t){return{getReturnType:function(t){return It},toGlsl:function(e,r){qt(r,2);for(var n=jt,i=0;i<r.length;i++)n&=Zt(r[i]);if(n===Nt)throw new Error("All arguments should be of compatible type, got "+JSON.stringify(r)+" instead");return n&=~Gt,"("+zt(e,r[0],n)+" "+t+" "+zt(e,r[1],n)+")"}}}function ie(t){return{getReturnType:function(t){return It},toGlsl:function(e,r){$t(r,2);for(var n=0;n<r.length;n++)Kt(r[n]);return"("+r.map((function(t){return zt(e,t)})).join(" "+t+" ")+")"}}}Bt.band={getReturnType:function(t){return Mt},toGlsl:function(t,e){$t(e,1),Jt(e,3);var r=e[0];if(!(re in t.functions)){for(var n="",i=t.bandCount||1,o=0;o<i;o++){var a=Math.floor(o/4),s=o%4;s===i-1&&1===s&&(s=3),n+="\n          if (band == "+(o+1)+".0) {\n            return texture2D("+(dt+"["+a+"]")+", v_textureCoord + vec2(dx, dy))["+s+"];\n          }\n        "}t.functions.getBandValue="\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / "+mt+";\n          float dy = yOffset / "+yt+";\n          "+n+"\n        }\n      "}return"getBandValue("+zt(t,r)+", "+zt(t,e[1]||0)+", "+zt(t,e[2]||0)+")"}},Bt.time={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,0),"u_time"}},Bt.zoom={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,0),"u_zoom"}},Bt.resolution={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,0),"u_resolution"}},Bt["*"]={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,2),Ht(e),"("+zt(t,e[0])+" * "+zt(t,e[1])+")"}},Bt["/"]={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,2),Ht(e),"("+zt(t,e[0])+" / "+zt(t,e[1])+")"}},Bt["+"]={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,2),Ht(e),"("+zt(t,e[0])+" + "+zt(t,e[1])+")"}},Bt["-"]={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,2),Ht(e),"("+zt(t,e[0])+" - "+zt(t,e[1])+")"}},Bt.clamp={getReturnType:function(t){return Mt},toGlsl:function(t,e){qt(e,3),Ht(e);var r=zt(t,e[1]),n=zt(t,e[2]);return"clamp("+zt(t,e[0])+", "+r+", "+n+")"}},Bt["%"]={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,2),Ht(e),"mod("+zt(t,e[0])+", "+zt(t,e[1])+")"}},Bt["^"]={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,2),Ht(e),"pow("+zt(t,e[0])+", "+zt(t,e[1])+")"}},Bt.abs={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,1),Ht(e),"abs("+zt(t,e[0])+")"}},Bt.sin={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,1),Ht(e),"sin("+zt(t,e[0])+")"}},Bt.cos={getReturnType:function(t){return Mt},toGlsl:function(t,e){return qt(e,1),Ht(e),"cos("+zt(t,e[0])+")"}},Bt.atan={getReturnType:function(t){return Mt},toGlsl:function(t,e){return $t(e,1),Jt(e,2),Ht(e),2===e.length?"atan("+zt(t,e[0])+", "+zt(t,e[1])+")":"atan("+zt(t,e[0])+")"}},Bt[">"]={getReturnType:function(t){return It},toGlsl:function(t,e){return qt(e,2),Ht(e),"("+zt(t,e[0])+" > "+zt(t,e[1])+")"}},Bt[">="]={getReturnType:function(t){return It},toGlsl:function(t,e){return qt(e,2),Ht(e),"("+zt(t,e[0])+" >= "+zt(t,e[1])+")"}},Bt["<"]={getReturnType:function(t){return It},toGlsl:function(t,e){return qt(e,2),Ht(e),"("+zt(t,e[0])+" < "+zt(t,e[1])+")"}},Bt["<="]={getReturnType:function(t){return It},toGlsl:function(t,e){return qt(e,2),Ht(e),"("+zt(t,e[0])+" <= "+zt(t,e[1])+")"}},Bt["=="]=ne("=="),Bt["!="]=ne("!="),Bt["!"]={getReturnType:function(t){return It},toGlsl:function(t,e){return qt(e,1),Kt(e[0]),"(!"+zt(t,e[0])+")"}},Bt.all=ie("&&"),Bt.any=ie("||"),Bt.between={getReturnType:function(t){return It},toGlsl:function(t,e){qt(e,3),Ht(e);var r=zt(t,e[1]),n=zt(t,e[2]),i=zt(t,e[0]);return"("+i+" >= "+r+" && "+i+" <= "+n+")"}},Bt.array={getReturnType:function(t){return Dt},toGlsl:function(t,e){$t(e,2),Jt(e,4),Ht(e);var r=e.map((function(e){return zt(t,e,Mt)}));return"vec"+e.length+"("+r.join(", ")+")"}},Bt.color={getReturnType:function(t){return Gt},toGlsl:function(t,e){$t(e,3),Jt(e,4),Ht(e);var r=e;3===e.length&&r.push(1);var n=e.map((function(e,r){return zt(t,e,Mt)+(r<3?" / 255.0":"")}));return"vec"+e.length+"("+n.join(", ")+")"}},Bt.interpolate={getReturnType:function(t){for(var e=Gt|Mt,r=3;r<t.length;r+=2)e&=Zt(t[r]);return e},toGlsl:function(t,e,r){Qt(e),$t(e,6);var n,i=e[0];switch(i[0]){case"linear":n=1;break;case"exponential":n=i[1];break;default:n=null}if(!n)throw new Error('Invalid interpolation type for "interpolate" operator, received: '+JSON.stringify(i));var o=void 0!==r?r:jt,a=Bt.interpolate.getReturnType(e)&o;te(e,a);for(var s=zt(t,e[1]),u=Xt(n),l="",c=2;c<e.length-2;c+=2){var h=zt(t,e[c]),f=l||zt(t,e[c+1],a),p=zt(t,e[c+2]);l="mix("+f+", "+zt(t,e[c+3],a)+", pow(clamp(("+s+" - "+h+") / ("+p+" - "+h+"), 0.0, 1.0), "+u+"))"}return l}},Bt.match={getReturnType:function(t){for(var e=jt,r=2;r<t.length;r+=2)e&=Zt(t[r]);return e&=Zt(t[t.length-1])},toGlsl:function(t,e,r){Qt(e),$t(e,4);var n=void 0!==r?r:jt,i=Bt.match.getReturnType(e)&n;te(e,i);for(var o=zt(t,e[0]),a=zt(t,e[e.length-1],i),s=null,u=e.length-3;u>=1;u-=2){s="("+o+" == "+zt(t,e[u])+" ? "+zt(t,e[u+1],i)+" : "+(s||a)+")"}return s}},Bt.case={getReturnType:function(t){for(var e=jt,r=1;r<t.length;r+=2)e&=Zt(t[r]);return e&=Zt(t[t.length-1])},toGlsl:function(t,e,r){!function(t){if(t.length%2==0)throw new Error("An odd amount of arguments was expected, got "+t+" instead")}(e),$t(e,3);var n=void 0!==r?r:jt,i=Bt.case.getReturnType(e)&n;te(e,i);for(var o=0;o<e.length-1;o+=2)Kt(e[o]);var a=zt(t,e[e.length-1],i),s=null;for(o=e.length-3;o>=0;o-=2){s="("+zt(t,e[o])+" ? "+zt(t,e[o+1],i)+" : "+(s||a)+")"}return s}};var oe=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();function ae(t,e){var r="\n    attribute vec2 "+xt+";\n    uniform mat4 "+gt+";\n    uniform float "+vt+";\n\n    varying vec2 v_textureCoord;\n\n    void main() {\n      v_textureCoord = "+xt+";\n      gl_Position = "+gt+" * vec4("+xt+", "+vt+", 1.0);\n    }\n  ",n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e},i=[];if(void 0!==t.color){var o=zt(n,t.color,Gt);i.push("color = "+o+";")}if(void 0!==t.contrast){var a=zt(n,t.contrast,Mt);i.push("color.rgb = clamp(("+a+" + 1.0) * color.rgb - ("+a+" / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));")}if(void 0!==t.exposure){var s=zt(n,t.exposure,Mt);i.push("color.rgb = clamp(("+s+" + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));")}if(void 0!==t.saturation){var u=zt(n,t.saturation,Mt);i.push("\n      float saturation = "+u+" + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    ")}if(void 0!==t.gamma){var l=zt(n,t.gamma,Mt);i.push("color.rgb = pow(color.rgb, vec3(1.0 / "+l+"));")}if(void 0!==t.brightness){var c=zt(n,t.brightness,Mt);i.push("color.rgb = clamp(color.rgb + "+c+", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));")}var h={},f=n.variables.length;if(f>1&&!t.variables)throw new Error("Missing variables in style (expected "+n.variables+")");for(var p=function(e){var r=n.variables[e];if(!(r in t.variables))throw new Error("Missing '"+r+"' in style variables");var i=ee(r);h[i]=function(){var e=t.variables[r];return"string"==typeof e&&(e=Wt(n,e)),void 0!==e?e:-9999999}},d=0;d<f;++d)p(d);var g=Object.keys(h).map((function(t){return"uniform float "+t+";"})),_=Math.ceil(e/4);g.push("uniform sampler2D "+dt+"["+_+"];"),n.paletteTextures&&g.push("uniform sampler2D u_paletteTextures["+n.paletteTextures.length+"];");var v=Object.keys(n.functions).map((function(t){return n.functions[t]}));return{vertexShader:r,fragmentShader:"\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    uniform float "+_t+";\n    uniform float "+mt+";\n    uniform float "+yt+";\n    uniform float "+Tt+";\n    uniform float "+Et+";\n\n    "+g.join("\n")+"\n\n    "+v.join("\n")+"\n\n    void main() {\n      vec4 color = texture2D("+dt+"[0],  v_textureCoord);\n\n      "+i.join("\n")+"\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= "+_t+";\n    }",uniforms:h,paletteTextures:n.paletteTextures}}var se=function(t){function e(e){var r=this,n=e?(0,a.f0)({},e):{},i=n.style||{};delete n.style;var o=n.cacheSize;return delete n.cacheSize,(r=t.call(this,n)||this).style_=i,r.cacheSize_=o,r.styleVariables_=r.style_.variables||{},r.addChangeListener(l.Z.SOURCE,r.handleSourceUpdate_),r}return oe(e,t),e.prototype.handleSourceUpdate_=function(){this.setStyle(this.style_)},e.prototype.getSourceBandCount_=function(){var t=this.getSource();return t&&"bandCount"in t?t.bandCount:4},e.prototype.createRenderer=function(){var t=ae(this.style_,this.getSourceBandCount_());return new Lt(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})},e.prototype.setStyle=function(t){this.style_=t;var e=ae(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,paletteTextures:e.paletteTextures}),this.changed()},e.prototype.updateStyleVariables=function(t){(0,a.f0)(this.styleVariables_,t),this.changed()},e}(u);se.prototype.dispose;const ue=se},3983:(t,e,r)=>{function n(t,e,r){return Math.min(Math.max(t,e),r)}r.d(e,{uZ:()=>n,f9:()=>i,k3:()=>o,rU:()=>a,bI:()=>s,SV:()=>u,Yr:()=>l,$W:()=>c,t7:()=>h,GW:()=>p,mD:()=>d});var i="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2},o="log2"in Math?Math.log2:function(t){return Math.log(t)*Math.LOG2E};function a(t,e,r,n,i,o){var a=i-r,u=o-n;if(0!==a||0!==u){var l=((t-r)*a+(e-n)*u)/(a*a+u*u);l>1?(r=i,n=o):l>0&&(r+=a*l,n+=u*l)}return s(t,e,r,n)}function s(t,e,r,n){var i=r-t,o=n-e;return i*i+o*o}function u(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,i=Math.abs(t[r][r]),o=r+1;o<e;o++){var a=Math.abs(t[o][r]);a>i&&(i=a,n=o)}if(0===i)return null;var s=t[n];t[n]=t[r],t[r]=s;for(var u=r+1;u<e;u++)for(var l=-t[u][r]/t[r][r],c=r;c<e+1;c++)r==c?t[u][c]=0:t[u][c]+=l*t[r][c]}for(var h=new Array(e),f=e-1;f>=0;f--){h[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*h[f]}return h}function l(t){return t*Math.PI/180}function c(t,e){var r=t%e;return r*e<0?r+e:r}function h(t,e,r){return t+r*(e-t)}function f(t,e){var r=Math.pow(10,e);return Math.round(t*r)/r}function p(t,e){return Math.floor(f(t,e))}function d(t,e){return Math.ceil(f(t,e))}},1535:(t,e,r)=>{r.d(e,{Z:()=>x});var n=r(4773),i=r(5487),o=r(4806),a=r(7195),s=r(8641),u=r(6121),l=r(3983);const c=function(){function t(t,e,r,n,i,o){this.sourceProj_=t,this.targetProj_=e;var a={},c=(0,u.Ck)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=c(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&(0,s.dz)(n)==(0,s.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,s.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,s.dz)(this.targetProj_.getExtent()):null;var h=(0,s.rL)(r),f=(0,s.Xv)(r),p=(0,s.w$)(r),d=(0,s.hC)(r),g=this.transformInv_(h),_=this.transformInv_(f),v=this.transformInv_(p),m=this.transformInv_(d),y=10+(o?Math.max(0,Math.ceil((0,l.k3)((0,s.bg)(r)/(o*o*256*256)))):0);if(this.addQuad_(h,f,p,d,g,_,v,m,y),this.wrapsXInSource_){var T=1/0;this.triangles_.forEach((function(t,e,r){T=Math.min(T,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-T>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-T>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-T>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-T>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,r,n,i,o){this.triangles_.push({source:[n,i,o],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,n,i,o,a,u,c){var h=(0,s.hI)([i,o,a,u]),f=this.sourceWorldWidth_?(0,s.dz)(h)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&f>.5&&f<1,g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var _=(0,s.hI)([t,e,r,n]);g=(0,s.dz)(_)/this.targetWorldWidth_>.25||g}!d&&this.sourceProj_.isGlobal()&&f&&(g=f>.25||g)}if(!(!g&&this.maxSourceExtent_&&isFinite(h[0])&&isFinite(h[1])&&isFinite(h[2])&&isFinite(h[3]))||(0,s.kK)(h,this.maxSourceExtent_)){var v=0;if(!(g||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(u[0])&&isFinite(u[1])))if(c>0)g=!0;else if(1!=(v=(isFinite(i[0])&&isFinite(i[1])?0:8)+(isFinite(o[0])&&isFinite(o[1])?0:4)+(isFinite(a[0])&&isFinite(a[1])?0:2)+(isFinite(u[0])&&isFinite(u[1])?0:1))&&2!=v&&4!=v&&8!=v)return;if(c>0){if(!g){var m=[(t[0]+r[0])/2,(t[1]+r[1])/2],y=this.transformInv_(m),T=void 0;if(d)T=((0,l.$W)(i[0],p)+(0,l.$W)(a[0],p))/2-(0,l.$W)(y[0],p);else T=(i[0]+a[0])/2-y[0];var E=(i[1]+a[1])/2-y[1];g=T*T+E*E>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var x=[(e[0]+r[0])/2,(e[1]+r[1])/2],b=this.transformInv_(x),P=[(n[0]+t[0])/2,(n[1]+t[1])/2],R=this.transformInv_(P);this.addQuad_(t,e,x,P,i,o,b,R,c-1),this.addQuad_(P,x,r,n,R,b,a,u,c-1)}else{var S=[(t[0]+e[0])/2,(t[1]+e[1])/2],C=this.transformInv_(S),w=[(r[0]+n[0])/2,(r[1]+n[1])/2],L=this.transformInv_(w);this.addQuad_(t,S,w,n,i,C,L,u,c-1),this.addQuad_(S,e,r,w,C,o,a,L,c-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&v)&&this.addTriangle_(t,r,n,i,a,u),0==(14&v)&&this.addTriangle_(t,r,e,i,a,o),v&&(0==(13&v)&&this.addTriangle_(e,n,t,o,u,i),0==(7&v)&&this.addTriangle_(e,n,r,o,u,a))}},t.prototype.calculateSourceExtent=function(){var t=(0,s.lJ)();return this.triangles_.forEach((function(e,r,n){var i=e.source;(0,s.Wj)(t,i[0]),(0,s.Wj)(t,i[1]),(0,s.Wj)(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}();var h,f=r(1481),p=r(9374),d=r(8326);function g(t,e,r,n,i){t.beginPath(),t.moveTo(0,0),t.lineTo(e,r),t.lineTo(n,i),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(r,i)),t.restore()}function _(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function v(t,e,r,n){var i=(0,u.vs)(r,e,t),o=(0,u._Q)(e,n,r),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var l=t.getMetersPerUnit();void 0!==l&&(o/=l);var c=t.getExtent();if(!c||(0,s.b8)(c,i)){var h=(0,u._Q)(t,o,i)/o;isFinite(h)&&h>0&&(o/=h)}return o}function m(t,e,r,n,i,o,a,u,c,v,m,y){var T=(0,d.E4)(Math.round(r*t),Math.round(r*e));if(y||(0,p.f0)(T,f.$),0===c.length)return T.canvas;function E(t){return Math.round(t*r)/r}T.scale(r,r),T.globalCompositeOperation="lighter";var x=(0,s.lJ)();c.forEach((function(t,e,r){(0,s.l7)(x,t.extent)}));var b=(0,s.dz)(x),P=(0,s.Cr)(x),R=(0,d.E4)(Math.round(r*b/n),Math.round(r*P/n));y||(0,p.f0)(R,f.$);var S=r/n;c.forEach((function(t,e,r){var n=t.extent[0]-x[0],i=-(t.extent[3]-x[3]),o=(0,s.dz)(t.extent),a=(0,s.Cr)(t.extent);t.image.width>0&&t.image.height>0&&R.drawImage(t.image,v,v,t.image.width-2*v,t.image.height-2*v,n*S,i*S,o*S,a*S)}));var C=(0,s.rL)(a);return u.getTriangles().forEach((function(t,e,i){var a=t.source,s=t.target,u=a[0][0],c=a[0][1],f=a[1][0],p=a[1][1],d=a[2][0],v=a[2][1],m=E((s[0][0]-C[0])/o),b=E(-(s[0][1]-C[1])/o),P=E((s[1][0]-C[0])/o),S=E(-(s[1][1]-C[1])/o),w=E((s[2][0]-C[0])/o),L=E(-(s[2][1]-C[1])/o),A=u,O=c;u=0,c=0;var F=[[f-=A,p-=O,0,0,P-m],[d-=A,v-=O,0,0,w-m],[0,0,f,p,S-b],[0,0,d,v,L-b]],M=(0,l.SV)(F);if(M){if(T.save(),T.beginPath(),function(){if(void 0===h){var t=document.createElement("canvas").getContext("2d");t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",g(t,4,5,4,0),g(t,4,5,0,5);var e=t.getImageData(0,0,3,3).data;h=_(e,0)||_(e,4)||_(e,8)}return h}()||!y){T.moveTo(P,S);for(var U=m-P,G=b-S,I=0;I<4;I++)T.lineTo(P+E((I+1)*U/4),S+E(I*G/3)),3!=I&&T.lineTo(P+E((I+1)*U/4),S+E((I+1)*G/3));T.lineTo(w,L)}else T.moveTo(P,S),T.lineTo(m,b),T.lineTo(w,L);T.clip(),T.transform(M[0],M[2],M[1],M[3],m,b),T.translate(x[0]-A,x[3]-O),T.scale(n/r,-n/r),T.drawImage(R.canvas,0,0),T.restore()}})),m&&(T.save(),T.globalCompositeOperation="source-over",T.strokeStyle="black",T.lineWidth=1,u.getTriangles().forEach((function(t,e,r){var n=t.target,i=(n[0][0]-C[0])/o,a=-(n[0][1]-C[1])/o,s=(n[1][0]-C[0])/o,u=-(n[1][1]-C[1])/o,l=(n[2][0]-C[0])/o,c=-(n[2][1]-C[1])/o;T.beginPath(),T.moveTo(s,u),T.lineTo(i,a),T.lineTo(l,c),T.closePath(),T.stroke()})),T.restore()),T.canvas}var y,T=r(5818),E=(y=function(t,e){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},y(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}y(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});const x=function(t){function e(e,r,i,o,u,h,f,p,d,g,_,m){var y=t.call(this,u,a.Z.IDLE,{interpolate:!!m})||this;y.renderEdges_=void 0!==_&&_,y.pixelRatio_=f,y.gutter_=p,y.canvas_=null,y.sourceTileGrid_=r,y.targetTileGrid_=o,y.wrappedTileCoord_=h||u,y.sourceTiles_=[],y.sourcesListenerKeys_=null,y.sourceZ_=0;var T=o.getTileCoordExtent(y.wrappedTileCoord_),E=y.targetTileGrid_.getExtent(),x=y.sourceTileGrid_.getExtent(),b=E?(0,s.Ed)(T,E):T;if(0===(0,s.bg)(b))return y.state=a.Z.EMPTY,y;var P=e.getExtent();P&&(x=x?(0,s.Ed)(x,P):P);var R=o.getResolution(y.wrappedTileCoord_[0]),S=function(t,e,r,n){var i=(0,s.qg)(r),o=v(t,e,i,n);return(!isFinite(o)||o<=0)&&(0,s.H6)(r,(function(r){return o=v(t,e,r,n),isFinite(o)&&o>0})),o}(e,i,b,R);if(!isFinite(S)||S<=0)return y.state=a.Z.EMPTY,y;var C=void 0!==g?g:n.m;if(y.triangulation_=new c(e,i,b,x,S*C,R),0===y.triangulation_.getTriangles().length)return y.state=a.Z.EMPTY,y;y.sourceZ_=r.getZForResolution(S);var w=y.triangulation_.calculateSourceExtent();if(x&&(e.canWrapX()?(w[1]=(0,l.uZ)(w[1],x[1],x[3]),w[3]=(0,l.uZ)(w[3],x[1],x[3])):w=(0,s.Ed)(w,x)),(0,s.bg)(w)){for(var L=r.getTileRangeForExtentAndZ(w,y.sourceZ_),A=L.minX;A<=L.maxX;A++)for(var O=L.minY;O<=L.maxY;O++){var F=d(y.sourceZ_,A,O,f);F&&y.sourceTiles_.push(F)}0===y.sourceTiles_.length&&(y.state=a.Z.EMPTY)}else y.state=a.Z.EMPTY;return y}return E(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,n){e&&e.getState()==a.Z.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=a.Z.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),n="number"==typeof r?r:r[0],i="number"==typeof r?r:r[1],o=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),u=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=m(n,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),o,u,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=a.Z.LOADED}this.changed()},e.prototype.load=function(){if(this.state==a.Z.IDLE){this.state=a.Z.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,n){var o=e.getState();if(o==a.Z.IDLE||o==a.Z.LOADING){t++;var s=(0,T.oL)(e,i.Z.CHANGE,(function(r){var n=e.getState();n!=a.Z.LOADED&&n!=a.Z.ERROR&&n!=a.Z.EMPTY||((0,T.bN)(s),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(s)}}.bind(this)),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,r){t.getState()==a.Z.IDLE&&t.load()}))}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(T.bN),this.sourcesListenerKeys_=null},e}(o.Z)},4773:(t,e,r)=>{r.d(e,{m:()=>n,j:()=>i});var n=.5,i=!0},6841:(t,e,r)=>{r.d(e,{Z:()=>T});var n,i=r(5487),o=r(825),a=r(1535),s=r(1702),u=r(7195),l=r(306),c=r(4773),h=r(6121),f=r(8634),p=r(9012),d=r(4187),g=(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),_=function(t){function e(e){var r=this,n=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(n=e.interpolate),(r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:v,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:n,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this).crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:o.Z,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return g(e,t),e.prototype.canExpireCache=function(){if(!c.j)return t.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},e.prototype.expireCache=function(e,r){if(c.j){var n=this.getTileCacheForProjection(e);for(var i in this.tileCache.expireCache(this.tileCache==n?r:{}),this.tileCacheForProjection){var o=this.tileCacheForProjection[i];o.expireCache(o==n?r:{})}}else t.prototype.expireCache.call(this,e,r)},e.prototype.getGutterForProjection=function(t){return c.j&&this.getProjection()&&t&&!(0,h.OP)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getKey=function(){var e=t.prototype.getKey.call(this);return this.getInterpolate()||(e+=":disable-interpolation"),e},e.prototype.getOpaque=function(e){return!(c.j&&this.getProjection()&&e&&!(0,h.OP)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(e){if(!c.j)return t.prototype.getTileGridForProjection.call(this,e);var r=this.getProjection();if(!this.tileGrid||r&&!(0,h.OP)(r,e)){var n=(0,d.sq)(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=(0,p.X$)(e)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(e){if(!c.j)return t.prototype.getTileCacheForProjection.call(this,e);var r=this.getProjection();if(!r||(0,h.OP)(r,e))return this.tileCache;var n=(0,d.sq)(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new s.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,r,n,o,a){var s=[t,e,r],l=this.getTileCoordForTileUrlFunction(s,o),c=l?this.tileUrlFunction(l,n,o):void 0,h=new this.tileClass(s,void 0!==c?u.Z.IDLE:u.Z.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=a,h.addEventListener(i.Z.CHANGE,this.handleTileChange.bind(this)),h},e.prototype.getTile=function(t,e,r,n,i){var o=this.getProjection();if(c.j&&o&&i&&!(0,h.OP)(o,i)){var s=this.getTileCacheForProjection(i),u=[t,e,r],l=void 0,p=(0,f.km)(u);s.containsKey(p)&&(l=s.get(p));var d=this.getKey();if(l&&l.key==d)return l;var g=this.getTileGridForProjection(o),_=this.getTileGridForProjection(i),v=this.getTileCoordForTileUrlFunction(u,i),m=new a.Z(o,g,i,_,u,v,this.getTilePixelRatio(n),this.getGutter(),function(t,e,r,n){return this.getTileInternal(t,e,r,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return m.key=d,l?(m.interimTile=l,m.refreshInterimChain(),s.replace(p,m)):s.set(p,m),m}return this.getTileInternal(t,e,r,n,o||i)},e.prototype.getTileInternal=function(t,e,r,n,i){var o=null,a=(0,f.lg)(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var l=o;o=this.createTile_(t,e,r,n,i,s),l.getState()==u.Z.IDLE?o.interimTile=l.interimTile:o.interimTile=l,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,r,n,i,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(c.j&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){if(c.j){var r=(0,h.U2)(t);if(r){var n=(0,d.sq)(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}},e}(l.Z);function v(t,e){t.getImage().src=e}const m=_;var y=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();const T=function(t){function e(e){var r=e||{},n=void 0===r.imageSmoothing||r.imageSmoothing;void 0!==r.interpolate&&(n=r.interpolate);var i=void 0!==r.projection?r.projection:"EPSG:3857",o=void 0!==r.tileGrid?r.tileGrid:(0,p.dl)({extent:(0,p.Tl)(i),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,interpolate:n,opaque:r.opaque,projection:i,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this}return y(e,t),e}(m)},7580:(t,e,r)=>{r.d(e,{Sp:()=>o});var n=r(3983),i=6371008.8;function o(t,e,r){var o=r||i,a=(0,n.Yr)(t[1]),s=(0,n.Yr)(e[1]),u=(s-a)/2,l=(0,n.Yr)(e[0]-t[0])/2,c=Math.sin(u)*Math.sin(u)+Math.sin(l)*Math.sin(l)*Math.cos(a)*Math.cos(s);return 2*o*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}},1280:(t,e,r)=>{r.d(e,{Z:()=>a});var n=r(1345),i=r(6313),o=r(4307);const a=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=(0,o.Pq)(void 0!==e.scale?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new n.Z({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:i.Z.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){var e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getScaleArray=function(){return this.scaleArray_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t,this.scaleArray_=(0,o.Pq)(void 0!==t?t:1)},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}()}}]);